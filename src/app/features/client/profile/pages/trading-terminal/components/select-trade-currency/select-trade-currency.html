<div class="select-currency">
  <div class="header">
    <h1>Markets</h1>
    <p>Select a trading pair</p>
  </div>

  <div class="search-box">
    <input
      type="text"
      placeholder="Search pairs..."
      [(ngModel)]="searchQuery"
      (ngModelChange)="onSearchChange()"
    />
  </div>

  <div class="tabs">
    <button class="tab" [class.active]="activeTab === 'favorites'" (click)="switchTab('favorites')">
      ★ Favorites
    </button>
    <button class="tab" [class.active]="activeTab === 'all'" (click)="switchTab('all')">All</button>
  </div>

  <div class="currency-header">
    <div>Pair</div>
    <div>Price</div>
    <div>24h Change</div>
  </div>

  <div class="currency-list" *ngIf="!loading; else loadingTemplate">
    <div
      *ngFor="let pair of filteredPairs"
      class="currency-row"
      [class.selected]="getCurrentSymbol() === pair.symbol"
      (click)="selectPair(pair.symbol)"
    >
      <div class="currency-cell">
        <button
          class="favorite-btn"
          [class.is-favorite]="isFavorite(pair.symbol)"
          (click)="toggleFavorite(pair.symbol, $event)"
        >
          {{ isFavorite(pair.symbol) ? '★' : '☆' }}
        </button>
        <div class="currency-icon">
          <img
            [src]="'assets/app/img/coins/' + getBaseCurrency(pair.symbol) + '.png'"
            alt="BTC"
            class="coin-logo"
          />
        </div>
        <div class="currency-info">
          <div class="currency-symbol">{{ pair.baseAsset }}/{{ pair.quoteAsset }}</div>
          <div class="currency-name">{{ getCurrencyName(pair.symbol) }}</div>
        </div>
      </div>
      <div class="currency-price">${{ pair.price | number : '1.2-8' }}</div>
      <div
        class="currency-change"
        [class.up]="pair.priceChangePercent >= 0"
        [class.down]="pair.priceChangePercent < 0"
      >
        {{ pair.priceChangePercent >= 0 ? '+' : ''
        }}{{ pair.priceChangePercent | number : '1.2-2' }}%
      </div>
    </div>

    <div *ngIf="filteredPairs.length === 0" class="empty-state">
      <p>No trading pairs found</p>
      <small>Try adjusting your search</small>
    </div>
  </div>

  <ng-template #loadingTemplate>
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Loading markets...</p>
    </div>
  </ng-template>
</div>
