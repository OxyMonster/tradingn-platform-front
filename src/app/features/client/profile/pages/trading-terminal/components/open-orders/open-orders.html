<div class="orders-container">
  <div class="tabs">
    <button class="tab-button" [class.active]="activeTab === 'open'" (click)="switchTab('open')">
      Open Orders ({{ openOrders.length }})
    </button>
    <button
      class="tab-button"
      [class.active]="activeTab === 'history'"
      (click)="switchTab('history')"
    >
      Order History ({{ orderHistory.length }})
    </button>
  </div>

  <!-- Open Orders Tab -->
  <div *ngIf="activeTab === 'open'" class="tab-content active">
    <div class="orders-table" *ngIf="openOrders.length > 0; else noOpenOrders">
      <div class="table-header">
        <div class="column">Date of Creation</div>
        <div class="column">Pair</div>
        <div class="column">Type</div>
        <div class="column">Volume</div>
        <div class="column">Pledge</div>
        <div class="column">Open Course</div>
        <div class="column">Current Exchchange</div>
        <div class="column">Profit</div>
        <div class="column">Action</div>
      </div>

      <div class="table-body">
        <div class="table-row" *ngFor="let order of openOrders">
          <div class="column date">{{ order.dateCreated | date }}</div>
          <div class="column pair pair">
            <img
              [src]="'assets/app/img/coins/' + getBaseCurrency(order.pair) + '.png'"
              alt="BTC"
              class="coin-logo"
            />
            <span class="order-pair">
              {{ order.pair }}
            </span>
          </div>
          <div class="column type">
            <span
              class="badge"
              [ngClass]="{
                success: order.orderType === 'buy',
                error: order.orderType === 'sell'
              }"
            >
              {{ order.orderType | uppercase }}
            </span>
          </div>
          <div class="column type">
            {{ order.volume }}
          </div>
          <div class="column">{{ '$' + order.pledge }}</div>
          <div class="column">{{ order.entryPrice }}</div>
          <div class="column">{{ order.currentPrice || 'Loading...' }}</div>
          <div class="column" [ngClass]="{ 'profit-positive': order.profit > 0, 'profit-negative': order.profit < 0 }">
            {{ order.profit ? ('$' + (order.profit | number : '1.2-4')) : '$0.00' }}
          </div>

          <div class="column">
            <button class="btn-small cancel" (click)="cancelOrder(order._id)">Close Deal</button>
          </div>
        </div>
      </div>
    </div>

    <ng-template #noOpenOrders>
      <div class="empty-state">
        <div class="empty-icon">ðŸ“‹</div>
        <p>No open orders</p>
        <small>Your open orders will appear here</small>
      </div>
    </ng-template>
  </div>

  <!-- Order History Tab -->
  <div *ngIf="activeTab === 'history'" class="tab-content active">
    <div class="orders-table history-table" *ngIf="orderHistory.length > 0; else noHistory">
      <div class="table-header">
        <div class="column">Pair</div>
        <div class="column">Type</div>
        <div class="column">Side</div>
        <div class="column">Price</div>
        <div class="column">Amount</div>
        <div class="column">Total</div>
        <div class="column">Status</div>
        <div class="column">Time</div>
      </div>

      <div class="table-body">
        <div class="table-row" *ngFor="let order of orderHistory">
          <div class="column pair">{{ order.symbol }}</div>
          <div class="column">{{ order.type | uppercase }}</div>
          <div
            class="column type"
            [class.buy]="order.side === 'buy'"
            [class.sell]="order.side === 'sell'"
          >
            {{ order.side | uppercase }}
          </div>
          <div class="column price">{{ order.price | number : '1.2-8' }}</div>
          <div class="column amount">{{ order.quantity | number : '1.4-8' }}</div>
          <div class="column total">{{ order.total | number : '1.2-2' }}</div>
          <div class="column">
            <span [class]="getStatusClass(order.status)">
              {{ order.status | uppercase }}
            </span>
          </div>
          <div class="column time">{{ order.createdAt | date : 'short' }}</div>
        </div>
      </div>
    </div>

    <ng-template #noHistory>
      <div class="empty-state">
        <div class="empty-icon">ðŸ“Š</div>
        <p>No order history</p>
        <small>Your completed orders will appear here</small>
      </div>
    </ng-template>
  </div>
</div>
